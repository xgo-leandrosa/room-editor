<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Editor</title>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            /* Prevent scrolling */
        }

        :root {
            font-family: Inter, sans-serif;
            font-feature-settings: 'liga' 1, 'calt' 1;
            /* fix for Chrome */
        }

        @supports (font-variation-settings: normal) {
            :root {
                font-family: InterVariable, sans-serif;
            }
        }


        #editorContainer {
            /* margin-left: 400px;
            margin-top: 200px; */
            width: 1200px;
            height: 600px;
            border: red solid 1px;
            position: relative;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/popper.js@1"></script>
    <script src="https://unpkg.com/tippy.js@4"></script>
    <!-- HTML in your document's head -->
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="room-editor.css">
    <script src="room-editor.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>



</head>

<body>
    <div id="editorContainer">
        <!-- Your editor content will go here -->
    </div>

    <!--
    <div id="toolbox" class="ui">
        <div id="coupleTableChooser" class="ui">
            <div class="ui coupleTableChooserItem" data-tableType="CoupleRoundTable">
                Redonda
            </div>
            <div class="ui coupleTableChooserItem" data-tableType="CoupleOvalSTable">
                Oval S
            </div>
            <div class="ui coupleTableChooserItem" data-tableType="CoupleOvalMTable">
                Oval M
            </div>
            <div class="ui coupleTableChooserItem" data-tableType="CoupleOvalLTable">
                Oval L
            </div>
            <div class="ui coupleTableChooserItem" data-tableType="CoupleForestSTable">
                Forest S
            </div>
            <div class="ui coupleTableChooserItem" data-tableType="CoupleForestMTable">
                Forest M
            </div>
        </div>
        <div id="guestTableChooser" class="ui">
            <div class="ui guestTableChooserItem" data-tableType="SquareTable">
                Quadrada
            </div>
            <div class="ui guestTableChooserItem" data-tableType="RoundTable">
                Redonda
            </div>
            <div class="ui guestTableChooserItem" data-tableType="RectangularTable">
                Rectangular
            </div>


        </div>
        <div>
            <button onclick="deserializeEditor()">Load</button>
            <button onclick="serializeEditor()">Save</button>
        </div>
        <div id="mouseInfo">
            Mouse:
            <div id="mousePosition">X: 0px Y: 0px</div>
            World position:
            <div id="worldPosition">X: 0px Y: 0px</div>
            Mouse to worl:
            <div id="mouseWorlPosition">X: 0px Y: 0px</div>
        </div>
    </div>-->

    <script>
        const roomEditor = new RoomEditor("editorContainer", "pt");
        // roomEditor.setActiveLanguage("en");
        //roomEditor.setRoomPlan("http://sllc-api.xpertgo.pt:5000/api/files/65969b70b2d95c1f18727bce");

        //roomEditor.activeCoupleTables(["CoupleRoundTable","CoupleOvalSTable","CoupleOvalMTable","CoupleOvalMFullTable","CoupleOvalLTable","CoupleOvalLFullTable","CoupleForestSTable","CoupleForestMTable",]);
        //roomEditor.activeGuestTables(["RoundTable","SquareTable","RectangularTable","RectangularLTable","ForestMTable"]);

        const saved = {
            "roomPlan": {
                "imageSrc": "http://sllc-api.xpertgo.pt:5000/api/files/65969b70b2d95c1f18727bce",
                //"x": -529,
                //"y": -132,
                "x": 0,
                "y": 0,
                "scale": 0.14660696213034943
            },
            "tables": [
                {
                    "position": {
                        "rotate": 0,
                        "x": 3161.531886084825,
                        "y": 2082.3312468092936,
                        "scale": 1
                    },
                    "tablePurpose": "GUEST",
                    "_id": "659c1e2f72b88860e01f672b",
                    "code": 0,
                    "row": 1,
                    "name": "Table 1",
                    "seats": [
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6737",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6736",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6735",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6734",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6733",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6732",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6731",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6730",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f672f",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f672e",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f672d",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f672c",
                            "code": 0,
                            "guestName": "Guest"
                        }
                    ],
                    "notes": "",
                    "tableType": "ForestMTable",
                    "template": "6583079b41f842ab6e10b57a",
                    "createdAt": "2024-01-08T16:09:19.270Z",
                    "updatedAt": "2024-01-08T16:09:19.270Z",
                    "__v": 0,
                    "id": "659c1e2f72b88860e01f672b",
                    "x": 3161.531886084825,
                    "y": 2082.3312468092936,
                    "scale": 1,
                    "coupleX": 0,
                    "coupleY": 0
                },
                {
                    "position": {
                        "rotate": 0,
                        "x": 3164.9947614926946,
                        "y": 2082.3312468092936,
                        "scale": 1
                    },
                    "tablePurpose": "GUEST",
                    "_id": "659c1e2f72b88860e01f6738",
                    "code": 1,
                    "row": 1,
                    "name": "Table 2",
                    "seats": [
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6744",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6743",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6742",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6741",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6740",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673f",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673e",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673d",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673c",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673b",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f673a",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6739",
                            "code": 0,
                            "guestName": "Guest"
                        }
                    ],
                    "notes": "",
                    "tableType": "SquareTable",
                    "template": "6583079b41f842ab6e10b57a",
                    "createdAt": "2024-01-08T16:09:19.307Z",
                    "updatedAt": "2024-01-08T16:09:19.307Z",
                    "__v": 0,
                    "id": "659c1e2f72b88860e01f6738",
                    "x": 3164.9947614926946,
                    "y": 2082.3312468092936,
                    "scale": 1,
                    "coupleX": 0,
                    "coupleY": 0
                },
                {
                    "position": {
                        "rotate": 0,
                        "x": 2854.6688678299297,
                        "y": 1759.751496934613,
                        "scale": 1
                    },
                    "tablePurpose": "GUEST",
                    "_id": "659c1e2f72b88860e01f6745",
                    "code": 2,
                    "row": 1,
                    "name": "Table 3",
                    "seats": [
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674f",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674e",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674d",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674c",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674b",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f674a",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6749",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6748",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6747",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6746",
                            "code": 0,
                            "guestName": "Guest"
                        }
                    ],
                    "notes": "",
                    "tableType": "RoundTable",
                    "template": "6583079b41f842ab6e10b57a",
                    "createdAt": "2024-01-08T16:09:19.337Z",
                    "updatedAt": "2024-01-08T16:09:19.337Z",
                    "__v": 0,
                    "id": "659c1e2f72b88860e01f6745",
                    "x": 2854.6688678299297,
                    "y": 2854.6688678299297,
                    "scale": 1,
                    "coupleX": 0,
                    "coupleY": 0
                },
                {
                    "position": {
                        "rotate": 0,
                        "x": 3597.8483701340106,
                        "y": 2133.1390247927607,
                        "scale": 1
                    },
                    "tablePurpose": "GUEST",
                    "_id": "659c1e2f72b88860e01f6750",
                    "code": 3,
                    "row": 1,
                    "name": "Table 4",
                    "seats": [
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f675e",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f675d",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f675c",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f675b",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f675a",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6759",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6758",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6757",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6756",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6755",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6754",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6753",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6752",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6751",
                            "code": 0,
                            "guestName": "Guest"
                        }
                    ],
                    "notes": "",
                    "tableType": "RectangularTable",
                    "template": "6583079b41f842ab6e10b57a",
                    "createdAt": "2024-01-08T16:09:19.364Z",
                    "updatedAt": "2024-01-08T16:09:19.364Z",
                    "__v": 0,
                    "id": "659c1e2f72b88860e01f6750",
                    "x": 3597.8483701340106,
                    "y": 3597.8483701340106,
                    "scale": 1,
                    "coupleX": 0,
                    "coupleY": 0
                },
                {
                    "position": {
                        "rotate": 0,
                        "x": 2554.2417243325212,
                        "y": 2221.8114848935375,
                        "scale": 1
                    },
                    "tablePurpose": "GUEST",
                    "_id": "659c1e2f72b88860e01f675f",
                    "code": 4,
                    "row": 1,
                    "name": "Table 5",
                    "seats": [
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676f",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676e",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676d",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676c",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676b",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f676a",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6769",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6768",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6767",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6766",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6765",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6764",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6763",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6762",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6761",
                            "code": 0,
                            "guestName": "Guest"
                        },
                        {
                            "guestAge": "ADULT",
                            "foodRestrictions": [],
                            "_id": "659c1e2f72b88860e01f6760",
                            "code": 0,
                            "guestName": "Guest"
                        }
                    ],
                    "notes": "",
                    "tableType": "RectangularLTable",
                    "template": "6583079b41f842ab6e10b57a",
                    "createdAt": "2024-01-08T16:09:19.401Z",
                    "updatedAt": "2024-01-08T16:09:19.401Z",
                    "__v": 0,
                    "id": "659c1e2f72b88860e01f675f",
                    "x": 2554.2417243325212,
                    "y": 2554.2417243325212,
                    "scale": 1,
                    "coupleX": 0,
                    "coupleY": 0
                }
            ]
        };
        roomEditor.deserializeEditor(saved);
        //roomEditor.activeCoupleTables(["CoupleRoundTable","CoupleOvalSTable","CoupleOvalMTable","CoupleOvalMFullTable","CoupleOvalLTable","CoupleOvalLFullTable","CoupleForestSTable","CoupleForestMTable",]);
        roomEditor.activeGuestTables(["RoundTable", "SquareTable", "RectangularTable", "RectangularLTable", "ForestMTable"]);

        roomEditor.mouseManager.setChangeCoupleEvent(() => {
            alert("Ola Isabel");
        })

        roomEditor.mouseManager.changeCoupleTable("CoupleOvalSTable");
    </script>

</body>

</html>